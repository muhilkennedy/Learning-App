CREATE TABLE IF NOT EXISTS USER(USERID int NOT NULL AUTO_INCREMENT PRIMARY KEY, EMAILID varchar(50) NOT NULL UNIQUE, PASSWORD varchar(20) DEFAULT NULL, MOBILE varchar(15) DEFAULT NULL, FNAME varchar(15) NOT NULL, LNAME varchar(15) DEFAULT NULL, ROLE varchar(5), ACTIVE BOOL DEFAULT FALSE, LOGINVIA VARCHAR(10) DEFAULT 'INTERNAL');
CREATE TABLE IF NOT EXISTS ADDRESS(ID int NOT NULL AUTO_INCREMENT PRIMARY KEY, USERID int, STREET varchar(30), CITY varchar(30), PIN varchar(10), CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID));
CREATE TABLE IF NOT EXISTS CATEGORY(CID int NOT NULL AUTO_INCREMENT PRIMARY KEY, CATEGORY varchar(25) NOT NULL, PARENTID int, CONSTRAINT FOREIGN KEY(PARENTID) REFERENCES CATEGORY(CID));
CREATE TABLE IF NOT EXISTS ITEM(CID int, ITEMID int NOT NULL AUTO_INCREMENT PRIMARY KEY, ITEM varchar(20) NOT NULL, BRANDNAME varchar(50) NOT NULL, COST DECIMAL(10,2) NOT NULL, MEASURE VARCHAR(20) NOT NULL, OFFER int DEFAULT NULL, IMAGE BLOB DEFAULT NULL, ACTIVE BOOL DEFAULT TRUE, CONSTRAINT FOREIGN KEY(CID) REFERENCES CATEGORY(CID));
CREATE TABLE IF NOT EXISTS CART(USERID int, ITEMID int, QUANTITY int NOT NULL, CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID), CONSTRAINT FOREIGN KEY(ITEMID) REFERENCES ITEM(ITEMID));
CREATE TABLE IF NOT EXISTS ORDERS(USERID int, ORDERID int NOT NULL AUTO_INCREMENT PRIMARY KEY, STATUS varchar(15) NOT NULL, ORDERDATE DATETIME DEFAULT CURRENT_TIMESTAMP,  CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID));
CREATE TABLE IF NOT EXISTS ORDERDETAIL(ORDERDETAILID int NOT NULL AUTO_INCREMENT PRIMARY KEY, ORDERID int, ITEMID int, QUANTITY int NOT NULL, CONSTRAINT FOREIGN KEY(ORDERID) REFERENCES ORDERS(ORDERID), CONSTRAINT FOREIGN KEY(ITEMID) REFERENCES ITEM(ITEMID));
CREATE TABLE IF NOT EXISTS INVOICE(INVOICEID int NOT NULL AUTO_INCREMENT PRIMARY KEY, ORDERID int, DOCUMENT MEDIUMBLOB, CONSTRAINT FOREIGN KEY(ORDERID) REFERENCES ORDERS(ORDERID));
CREATE TABLE IF NOT EXISTS VERIFICATION(ID int NOT NULL AUTO_INCREMENT PRIMARY KEY, USERID int, CODE varchar(10) NOT NULL, TIMECREATED DATETIME DEFAULT CURRENT_TIMESTAMP, CONSTRAINT FOREIGN KEY(USERID) REFERENCES USER(USERID));

